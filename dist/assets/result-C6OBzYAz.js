import{_ as m,r as _,s as g,b as v,a as h,N as x,u as b}from"./Navbar-BJRwqD9_.js";import{u as S}from"./loading-DyO2YNZC.js";import"./index-CyoRPjmT.js";const w={name:"CardResult"},y={class:"card"},C={class:"card-body"},N={class:"card-footer"};function k(d,u,r,t,i,l){return Vue.openBlock(),Vue.createElementBlock("div",y,[Vue.createElementVNode("div",C,[Vue.renderSlot(d.$slots,"body",{},void 0,!0)]),Vue.createElementVNode("div",N,[Vue.renderSlot(d.$slots,"footer",{},void 0,!0)])])}const I=m(w,[["render",k],["__scopeId","data-v-dbb38a15"]]),R={__name:"PaginationResult",setup(d){const{dataState:u,paginationState:r}=_(),t=g().paginationState,i=Vue.reactive({mqls:[]}),l=v();Vue.onBeforeMount(()=>{i.mqls=l.create(Object.keys(V)),l.startListener(i.mqls,s,!0)}),Vue.onUnmounted(()=>{l.removeListener(i.mqls,s),i.mqls=[]});const c=Vue.computed({get:()=>r.currentPage,set:e=>{t.updateCurrentPage(e)}}),p=Vue.computed({get:()=>r.pageSize,set:e=>{t.updatePageSize(e)}}),V={"(max-width: 628px)":"prev, jumper, next, total","(min-width: 629px) and (max-width: 796px)":"prev, pager, next, jumper, total","(min-width: 797px)":"sizes, prev, pager, next, jumper, total"};function s(e){e.matches&&t.updateLayout(V[e.media])}return(e,n)=>{const o=Vue.resolveComponent("el-pagination");return Vue.openBlock(),Vue.createBlock(o,{"current-page":c.value,"onUpdate:currentPage":n[0]||(n[0]=a=>c.value=a),"page-size":p.value,"onUpdate:pageSize":n[1]||(n[1]=a=>p.value=a),total:Vue.unref(u).info.length,"page-sizes":Vue.unref(r).pageSizeList,layout:Vue.unref(r).layout},null,8,["current-page","page-size","total","page-sizes","layout"])}}},z=m(R,[["__scopeId","data-v-a1a270d0"]]),B=["href"],L={__name:"TableResult",setup(d){const{dataState:u,paginationState:r}=_(),t=Vue.reactive({hoverColIndex:void 0,hoverRowIndex:void 0,data:JSON.parse(JSON.stringify(u.data))});function i(s){const e=s.prop,n=s.order;let o=t.data;if(!n){t.data=JSON.parse(JSON.stringify(u.data));return}["averageYield","roi"].includes(e)&&o.map(a=>{a[e]=a[e].replace("%","")}),n==="descending"?o=o.sort((a,f)=>f[e]-a[e]):o=o.sort((a,f)=>a[e]-f[e]),["averageYield","roi"].includes(e)&&o.map(a=>{a[e]=`${a[e]}%`}),t.data=o}function l({row:s,column:e,rowIndex:n,columnIndex:o}){if(s.rowIndex=n,e.columnIndex=o,n===t.hoverRowIndex&&o===t.hoverColIndex)return"select-row select-col";if(n===t.hoverRowIndex)return"select-row";if(o===t.hoverColIndex)return"select-col"}function c({columnIndex:s}){if(s===t.hoverColIndex)return"select-col"}function p(s,e){t.hoverRowIndex=s.rowIndex,t.hoverColIndex=e.columnIndex}function V(){t.hoverRowIndex=void 0,t.hoverColIndex=void 0}return Vue.watch(()=>u.data,s=>{t.data=JSON.parse(JSON.stringify(s))}),(s,e)=>{const n=Vue.resolveComponent("el-table-column"),o=Vue.resolveComponent("el-table");return Vue.openBlock(),Vue.createBlock(o,{"class-name":"result-table",data:t.data.slice((Vue.unref(r).currentPage-1)*Vue.unref(r).pageSize,Vue.unref(r).currentPage*Vue.unref(r).pageSize),border:"",onSortChange:i,"cell-style":{textAlign:"center"},"cell-class-name":l,"header-cell-class-name":c,onCellMouseEnter:p,onCellMouseLeave:V},{default:Vue.withCtx(()=>[Vue.createVNode(n,{label:"名稱 (代號)","min-width":"125",fixed:"left"},{default:Vue.withCtx(a=>[Vue.createElementVNode("a",{href:a.row.stockDividendURL,target:"_blank",title:"查看歷史股利分配率"},Vue.toDisplayString(a.row.stockFullName),9,B)]),_:1}),Vue.createVNode(n,{label:"收盤價",prop:"stockPrice","min-width":"110",sortable:"custom"}),Vue.createVNode(n,{label:"目前殖利率",prop:"averageYield","min-width":"150",sortable:"custom"}),Vue.createVNode(n,{label:"ROI",prop:"roi","min-width":"100",sortable:"custom"}),Vue.createVNode(n,{label:"平均股利 (現金/股票)",prop:"averageDividend","min-width":"210"}),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(u).request.yield.end-Vue.unref(u).request.yield.start+1,a=>(Vue.openBlock(),Vue.createBlock(n,{label:(Vue.unref(u).request.yield.start+a-1).toString()+"%",prop:"yield"+(Vue.unref(u).request.yield.start+a-1).toString()+"ConvertPrice","min-width":"85"},null,8,["label","prop"]))),256))]),_:1},8,["data"])}}},P=m(L,[["__scopeId","data-v-3c3b57b1"]]);async function $(){return h.get("/updateTime")}const M={class:"result-container",id:"resultContainer"},O={__name:"result",setup(d){VueRouter.useRouter();const u=b(),r=S(),{dataState:t}=_(),i=g().dataState,l=Vue.reactive({update:{price:"",dividend:""}});return Vue.onBeforeMount(()=>{r.isRunning()||r.show()}),Vue.onMounted(async()=>{l.update=await $();const c=setInterval(()=>{t.isDataReady&&(r.close(),clearInterval(c),t.isLazyLoading&&u.lazyLoading({limit:1e3,milliSecond:6e3}))},1e3)}),Vue.onUnmounted(()=>{i.initData()}),(c,p)=>(Vue.openBlock(),Vue.createElementBlock("div",M,[Vue.createVNode(x,{"fixed-top":!0,"navbar-use-animate-bg":"false","brand-text":"試算結果","contents-in-collapse":[{isBack:!0,text:"返回 首頁"},{href:"https://www.tdcc.com.tw/portal/zh/smWeb/qryStock",title:"開啟集保戶股權分散表",text:"查詢 大股東比例",target:"_blank"},{href:"https://invest.wessiorfinance.com/stock.html",title:"開啟存股試算",text:"存股 試算",target:"_blank"}],"updates-in-collapse":[{id:"updateDividend",text:"股利最後更新："+l.update.dividend},{id:"updatePrice",text:"收盤價最後更新："+l.update.price}]},null,8,["contents-in-collapse","updates-in-collapse"]),Vue.createVNode(Vue.unref(I),null,{body:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(P))]),footer:Vue.withCtx(()=>[Vue.createVNode(Vue.unref(z))]),_:1})]))}},T=m(O,[["__scopeId","data-v-775fb8fc"]]);export{T as default};
//# sourceMappingURL=result-C6OBzYAz.js.map
